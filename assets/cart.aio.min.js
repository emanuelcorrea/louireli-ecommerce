/*
Generated time: October 4, 2023 16:59
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
class CartRemoveButton extends HTMLElement{constructor(){super(),this.addEventListener("click",e=>{e.preventDefault(),(this.closest("cart-items")||this.closest("cart-drawer-items")).updateQuantity(this.dataset.index,0)})}}customElements.define("cart-remove-button",CartRemoveButton);class CartItems extends HTMLElement{constructor(){super(),this.lineItemStatusElement=document.getElementById("shopping-cart-line-item-status")||document.getElementById("CartDrawer-LineItemStatus"),this.currentItemCount=Array.from(this.querySelectorAll('[name="updates[]"]')).reduce((e,t)=>e+parseInt(t.value),0),this.debouncedOnChange=debounce(e=>{this.onChange(e)},300),this.addEventListener("change",this.debouncedOnChange.bind(this))}onChange(e){this.updateQuantity(e.target.dataset.index,e.target.value,document.activeElement.getAttribute("name"))}getSectionsToRender(){return[{id:"main-cart-items",section:document.getElementById("main-cart-items").dataset.id,selector:".js-contents"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"},{id:"cart-live-region-text",section:"cart-live-region-text",selector:".shopify-section"},{id:"main-cart-footer",section:document.getElementById("main-cart-footer").dataset.id,selector:".js-contents"}]}updateQuantity(r,e,i){this.enableLoading(r);e=JSON.stringify({line:r,quantity:e,sections:this.getSectionsToRender().map(e=>e.section),sections_url:window.location.pathname});fetch(""+routes.cart_change_url,{...fetchConfig(),body:e}).then(e=>e.text()).then(e=>{const t=JSON.parse(e);this.classList.toggle("is-empty",0===t.item_count);var e=document.querySelector("cart-drawer"),n=document.getElementById("main-cart-footer"),n=(n&&n.classList.toggle("is-empty",0===t.item_count),e&&e.classList.toggle("is-empty",0===t.item_count),this.getSectionsToRender().forEach(e=>{(document.getElementById(e.id).querySelector(e.selector)||document.getElementById(e.id)).innerHTML=this.getSectionInnerHTML(t.sections[e.section],e.selector)}),this.updateLiveRegions(r,t.item_count),document.getElementById("CartItem-"+r)||document.getElementById("CartDrawer-Item-"+r));n&&n.querySelector(`[name="${i}"]`)?e?trapFocus(e,n.querySelector(`[name="${i}"]`)):n.querySelector(`[name="${i}"]`).focus():0===t.item_count&&e?trapFocus(e.querySelector(".drawer__inner-empty"),e.querySelector("a")):document.querySelector(".cart-item")&&e&&trapFocus(e,document.querySelector(".cart-item__name")),this.disableLoading()}).catch(()=>{this.querySelectorAll(".loading-overlay").forEach(e=>e.classList.add("hidden")),(document.getElementById("cart-errors")||document.getElementById("CartDrawer-CartErrors")).textContent=window.cartStrings.error,this.disableLoading()})}updateLiveRegions(e,t){var n;this.currentItemCount===t&&(n=document.getElementById("Line-item-error-"+e)||document.getElementById("CartDrawer-LineItemError-"+e),e=document.getElementById("Quantity-"+e)||document.getElementById("Drawer-quantity-"+e),n.querySelector(".cart-item__error-text").innerHTML=window.cartStrings.quantityError.replace("[quantity]",e.value)),this.currentItemCount=t,this.lineItemStatusElement.setAttribute("aria-hidden",!0);const r=document.getElementById("cart-live-region-text")||document.getElementById("CartDrawer-LiveRegionText");r.setAttribute("aria-hidden",!1),setTimeout(()=>{r.setAttribute("aria-hidden",!0)},1e3)}getSectionInnerHTML(e,t){return(new DOMParser).parseFromString(e,"text/html").querySelector(t).innerHTML}enableLoading(e){(document.getElementById("main-cart-items")||document.getElementById("CartDrawer-CartItems")).classList.add("cart__items--disabled");var t=this.querySelectorAll(`#CartItem-${e} .loading-overlay`),e=this.querySelectorAll(`#CartDrawer-Item-${e} .loading-overlay`);[...t,...e].forEach(e=>e.classList.remove("hidden")),document.activeElement.blur(),this.lineItemStatusElement.setAttribute("aria-hidden",!1)}disableLoading(){(document.getElementById("main-cart-items")||document.getElementById("CartDrawer-CartItems")).classList.remove("cart__items--disabled")}}customElements.define("cart-items",CartItems),customElements.get("cart-note")||customElements.define("cart-note",class extends HTMLElement{constructor(){super(),this.addEventListener("change",debounce(e=>{e=JSON.stringify({note:e.target.value});fetch(""+routes.cart_update_url,{...fetchConfig(),body:e})},300))}});